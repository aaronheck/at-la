<!DOCTYPE html>
<html>
  <head>
    <title>Appalachian Trail, Los Angeles</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="description" content="Aaron Rosenheck undertakes a project to hike the Applachian Trail in Los Angeles (ATLA) without cutting his hair or shaving his beard.">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'Roboto', sans-serif;
        overflow-x: hidden;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;

      }

      .col {
        display: inline-flex;
        flex-direction: column;
      }

      .row {
        display: inline-flex;
        flex-direction: row;
        width: 100%;
      }

      .row2 {
        display: flex;
        flex-direction: row;
      }

      h3 {
        margin-top: 0px;
        margin-bottom: 0px;
        padding-block-start: 1em;
        padding-block-end: 0.5em;
        font-weight: normal;
      }

      p {
        margin-bottom: 0px;
        padding-block-end: 1em;
      }

      .full-width {
        width: 100%;
      }

      .twothirds-width {
        width: 66%;
      }  

      .stats-row {
        display: inline-flex;
        text-align: center;
        width: 100%;
        border-top: 2px solid #e6e6e6;
        border-bottom: 2px solid #e6e6e6;
      }

      .stat {
        margin-top: 10px;
        margin-bottom: 10px;
        padding-left: 5px;
        padding-right: 5px;
        flex: 1;
        height: 75px;
      }

      .right-border {
        border-right: 3px solid #e6e6e6;
      }

      .stat-number {
        /*TODO: actually align vertically center*/
        padding-top: 10px;
        font-size: 25px;
        font-weight: bold;
      }

      .stat-label {
        font-weight: bold;
      }

      .words {
        background: #dddddd6b;
        padding-left: 20px;
        padding-right: 20px;
        padding-bottom: 20px;
      }

      .newyorker {
        width: 100%;
        display: flex;
        margin-top: 20px;
        margin-bottom: 20px;
        flex-direction: column;
        align-items: center;
      }

      .newyorker {
        cursor: pointer;
      }

      #map {
        width: 100%;
        height: 45vh;
      }

      #footer {
        width: 100%;
        height: 75px;
        background: black;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        letter-spacing: 7px;
        text-decoration: none;
      }

      a {
        text-decoration: none;
      }

      .header-icon {
        height: 50px;
        padding-left: 40px;
        padding-right: 40px;
      }

      .header {
        /*position: fixed;  Sit on top of the page content */
        top: 0;
        width: 100%;
        display: flex;
        align-items: center;
        z-index: 2;
        background: white;
      }

      span.line {
        display: inline-block;
      }

      .progress {
        flex-wrap: wrap;
        justify-content: center;
        overflow: auto;
        white-space: nowrap;
      }

      .progpic > img {
        height: 300px;
        padding-bottom: 5px;
      }

      .progpic {
        margin: 15px;
        padding: 10px;
        background-color: #dfdfdf;
      }

      .progpic > span:nth-child(3) {
        font-size: 75%;
      }

      .progpic a {
        color: #3366BB;
      }


    </style>
  </head>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-53774413-1', 'auto');
    ga('send', 'pageview');
  </script>
  <body>

    <div>
      <section>
        
        <div class="row header">
          <div class="col">
            <img class="header-icon" src="/favicon.ico" />
          </div>
          <div class="col full-width">
            <h2><span class="line">Appalachian Trail,</span> <span class="line">Los Angeles</span></h2>
          </div>
        </div>
      </section>
      <section>
        <div class="stats-row">
          <span class="stat right-border">
            <div class="stat-number" id="complete-stat">2,190</div>
            <div class="stat-label">COMPLETE</div>
          </span>
          <span class="stat right-border">
            <div class="stat-number" id="days-stat">10</div>
            <div class="stat-label">MI/DAY</div>
          </span>
          <span class="stat">
            <div class="stat-number" id="etc-stat">1/12</div>
            <div class="stat-label">DONE</div>
          </span>
        </div>
      </section>
      <section class="words">

        <h3>Goal</h3>
        <span>Do a virtual thru hike of the Appalachian Trail by Running + Walking 2,190 miles around LA without cutting my hair or shaving my beard.</span>

        <h3>Why?</h3>
        <span>No good reason -- thought it would be cool. Plus who doesn't love a before and after picture?</span>

        <h3>What about elevation gain?</h3>
        <span>Screw elevation. I'm doing this sucker flat.</span>

        <h3>Where Are You Now?</h3>
        <span>Check out the map below to see my progress superimposed on the trail.</span>
      </section>
      <section>
        <div id="map">
        </div>
      </section>  
      

      <section class="words">
        <h3>Hair Progress</h3>
        <div class="progress row">
          <div class="col progpic">
            <img src="/images/progress/week1.jpg">
            <span>Week 1</span>
            <span>ok, actually had my final shaved that night</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week3.jpg">
            <span>Week 3</span>
            <span>boring. grow a beard already dingus</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week4.jpg">
            <span>Week 5</span>
            <span>OK now I see a bit of a beard.</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week7.jpg">
            <span>Week 7</span>
            <span>25th birthday run!</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week9.jpg">
            <span>Week 9</span>
            <span>smile!</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week10.jpg">
            <span>Week 10</span>
            <span>I said smile!</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week11.jpg">
            <span>Week 11</span>
            <span>can't even see the airpods behind the beard</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week12.jpg">
            <span>Week 12</span>
            <span>making some real progress!</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week13.jpg">
            <span>Week 13</span>
            <span>it's a great shirt.</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week14.jpg">
            <span>Week 14</span>
            <span>the hair is getting length too</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week15.jpg">
            <span>Week 15</span>
            <span>that be hiking</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week16.jpg">
            <span>Week 16</span>
            <span>Word of the day -- scorcher.</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week17-v2.jpg">
            <span>Week 17</span>
            <span>welcome to walktober.</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week19-v2.jpg">
            <span>Week 19</span>
            <span>sign's wrong. I'm 1,363 miles from GA.</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week20.jpg">
            <span>Week 20</span>
            <span>Miraculous: Tales of Ladybug &nbsp; Cat Noir</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week24.jpg">
            <span>Week 24</span>
            <span><a href="https://sammytuesday.org">sammytuesday.org</a></span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week26.jpg">
            <span>Week 26</span>
            <span>my muppet name is Greff</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week27.jpg">
            <span>Week 27</span>
            <span>fun run 5k (17:28)</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week28.jpg">
            <span>Week 28</span>
            <span>side beard</span>
          </div>
          <div class="col progpic">
            <img src="/images/progress/week30.jpg">
            <span>Week 30</span>
            <span><a href="https://www.youtube.com/watch?v=3dPaeUGrmdAs">26 miles across the sea</a></span>
          </div>
        </div>

        <h3>Ongoing List of Thoughts</h3>
        <ul>
          <li>Goals don't have to make sense. Having such strong commitment to a silly and not completely fleshed out project is the real merrit of this.</li>
          <li>Pick up pieces of garbage.</li>
          <li>Getting up early is great. </li>
          <li>Staying true to the social aspect of the Eastern Appalachian Trail my morning hike and lunch hike with friends are consistently my favorite parts of the day.</li>
          <li>My beard isn't as patchy as a I thought it would be and doesn't look bad as I expected (at least not at week 6).</li>
          <li>At first making my 20 minute bike ride into an hour long commute seemed dumb. But now I realized being outside makes me happy. Nature doesn't have to be untouched by humans. I still have time to watch TV each night.</li>
          <li>It's AppalaCHIAN not AppalaCHAIN.</li>
          <li>It is really cool to see the ground I am covering. It is fun to check in on the map to see where I am and read a bit about the area.</li>
          <li>Worst get rich quick scheme ever.</li>
        </ul>
      </section>

      <section id="footer">
        aaronrosenheck@gmail.com
      </section>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
      var map;
      
      var geoJson = $.get( "http://aaronrosenheck.com/data/route-3.json");

      initScroller();
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          gestureHandling: 'cooperative',
          disableDefaultUI: false
        });

        map.fitBounds(new google.maps.LatLngBounds({lat: 34.626688, lng: -84.193892}, {lat: 45.90424, lng: -68.921152}))
        geoJson.done((data) => {
          map.data.addGeoJson(data);
          // initStats(data);
        });

        map.data.setStyle(function(feature) {
          var color = feature.getProperty('color');
          return {
            strokeColor: color,
            strokeWeight: 3,
          };
        });
        var infowindow = new google.maps.InfoWindow({
            content: "250 miles down"
          });
        map.data.addListener('click', function(event) {
          ga('send', 'event', 'current-locmarker', 'click');
          if(event.feature.getProperty("distanceFromStart")) {
            var distanceFromStart = (event.feature.getProperty("distanceFromStart") * 0.000621371).toFixed(2);
            var toGo = (2190 - distanceFromStart).toFixed(2);
            // Sunday, June 9, 2019 6:30:00 AM Pacific Time
            var daysSinceStart = daysBetween(new Date(1560087000000), new Date());
            var avgMilesPerDay = (distanceFromStart / daysSinceStart);
            var daysLeft = Math.ceil(toGo / avgMilesPerDay);
            var completionDate = new Date();
            completionDate.setDate(completionDate.getDate() + daysLeft);
            completionDate = completionDate.toString().split(" ").slice(0,4).join(" ")
            infowindow.setContent("<div style='width:150px; text-align:center;'> <h3>ATLA</h3>"+ distanceFromStart +" miles down " + toGo + " to go! <br><br> Avg Miles/ Day: " + avgMilesPerDay.toFixed(2) + " <br><br> Estimated completion date: " + completionDate + "</div>");
            // position the infowindow on the marker
            infowindow.setPosition(event.feature.getGeometry().get());
            // anchor the infowindow on the marker
            infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
            infowindow.open(map);
          }
        });

      }

      function getSunday(d) {
        d = new Date(d);
        var day = d.getDay(),
            diff = d.getDate() - day;
        var sunday = new Date(d.setDate(d.getDate() - d.getDay()));
        sunday.setHours(0,0,0,0);
        return sunday;
      }

      function daysBetween( date1, date2 ) {
        //Get 1 day in milliseconds
        var one_day=1000*60*60*24;

        // Convert both dates to milliseconds
        var date1_ms = date1.getTime();
        var date2_ms = date2.getTime();

        // Calculate the difference in milliseconds
        var difference_ms = date2_ms - date1_ms;
          
        // Convert back to days and return
        return Math.floor(difference_ms/one_day); 
      }

      function initStats(data) {
        const monthNames = ["Jan.", "Feb.", "March", "Apr", "May", "June",
          "July", "August", "September", "October", "Nov", "Dec."
        ];
        let distanceFromStart = (data.features[0].properties.distanceFromStart * 0.000621371);
        let distanceFromStartFormatted = (data.features[0].properties.distanceFromStart * 0.000621371).toLocaleString(undefined, {maximumFractionDigits: 1});
        let togo = 2190 - distanceFromStart; 
        var daysSinceStart = daysBetween(new Date(1560106800000), new Date());

        var avgMilesPerDay = (distanceFromStart / daysSinceStart);
        var daysLeft = Math.ceil(togo / avgMilesPerDay);
        var completionDate = new Date();
        completionDate.setDate(completionDate.getDate() + daysLeft);
        console.log(completionDate)
        completionDate = monthNames[completionDate.getMonth()] + " " + completionDate.getDate();


        $("#complete-stat").text(distanceFromStartFormatted);
        $("#days-stat").text(avgMilesPerDay .toLocaleString(undefined, {maximumFractionDigits: 1}))
        $("#etc-stat").text(completionDate);
      }
      
      function initScroller() {
        let scroller = Scroller();

      }

      function Scroller() {
        let currImg = $($(".progpic")[0]);

        function scrollLeft() {
          currImg = currImg.next();
          currImg.css("background-color", "yellow");
          console.log(currImg.offset().left)
          console.log($(".progpic").scrollLeft() - $(".progpic").offset().left + currImg.offset().left)
          var a= $(".progpic").scrollLeft() - $(".progpic").offset().left + currImg.offset().left
          console.log(currImg.offset().left + currImg.width() / 2)
          $(".progress").animate( { scrollLeft: a }, 500 );
        }

        function scrollRight() {

        }

        return {
          scrollLeft,
          scrollRight
        }
      }

      


    </script>
    

    <!-- Replace the access key below. removing it from source code because google sends me emails thinking it leaked even though it needs to be exposerd to the public in my website anyway. -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVZsy3hIjZky3JZsnIq9wpnH1pvvV6SWE&callback=initMap&libraries=geometry"
    async defer></script>
  </body>
</html>